<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
	<div id="main-wrapper">
		<div class="container detailcolor">
			<div class="row">
			 <table class="table">
			 <tbody>
			  <tr>
			   <td width="30%" class="text-center" rowspan="8">
			    <img th:src="${vo.img}" style="width: 300px;height: 300px;margin-top: 20px;" referrerpolicy="no-referrer">
			   </td>
			  </tr>
			  <tr>
			   <td class="text-center" style="color: gray;" width="15%">ì´ë¦„</td>
			   <td width="55%">[[${vo.name_kor}]]</td>
			  </tr>
			  <tr>
			   <td class="text-center" style="color: gray;" width="15%">English Name</td>
			   <td width="55%">[[${vo.name_eng}]]</td>
			  </tr>
			  <tr>
			   <td class="text-center" style="color: gray;" width="15%">brand</td>
			   <td width="55%">[[${vo.brand}]]</td>
			  </tr>
			  <tr>
			   <td class="text-center" style="color: gray;" width="15%">ê°€ê²©</td>
			   <td width="55%">[[${vo.release_price}]]</td>
			  </tr>
			  <tr>
			   <td class="text-center" style="color: gray;" width="15%">color</td>
			   <td width="55%">[[${vo.color}]]</td>
			  </tr>
			  <tr>
			   <td class="text-center" style="color: gray;" width="15%">hit</td>
			   <td width="55%">[[${vo.hit}]]</td>
			  </tr>
			  <tr>
			   <td class="text-center" style="color: gray;" width="15%">ì¼ë ¨ë²ˆí˜¸</td>
			   <td width="55%">[[${vo.sku}]]</td>
			  </tr>
			  </tbody>
			 </table>
			 <table class="table">
			  <tr>
			   <td class="text-right">
			    <a href="javascript:history.back()" class="btn btn-sm btn-primary">ëª©ë¡</a>
			   </td>
			  </tr>
			  </table>
			</div>
			  <!-- ëŒ“ê¸€ -->
			<div class="row aln-center" style="margin-top: 0px;">
			  <table class="table">
			   <tr>
			   <td>
			    <table class="table" v-for="rvo in list">
			     <tr>
			      <td class="text-left" width="80%">
			      ğŸ˜((rvo.name))&nbsp;((rvo.dbday))
			      </td>
			      <td class="text-right" width="20%">
			       <span v-if="sessionId==rvo.id">
			        <button type="button" class="btn-xs btn-info upbtn" :id="'u'+rvo.no" @click="replyUpdateForm(rvo.no)">ìˆ˜ì •</button>
			        <button type="button" class="btn-xs btn-danger" @click="replyDelete(rvo.no)">ì‚­ì œ</button>
			       </span>
			      </td>
			     </tr>
			     <tr>
			      <td colspan="2" class="text-left">
			       <pre style="white-space: pre-wrap;background-color: white;border: none;">((rvo.msg))</pre>
			      </td>
			     </tr>
			     <tr>
			      <td colspan="2">
			       <table style="display: none;" :id="'up'+rvo.no">
			        <tr>
			         <td>
			          <textarea rows="4" cols="110" style="float:left" :id="'umsg'+rvo.no">((rvo.msg))</textarea>
			          <button type="button" class="btn-info" style="width: 105px;height: 87px;float: left;" @click="replyUpdate(rvo.no)">ìˆ˜ì •í•˜ê¸°</button>
			         </td>
			        </tr>
			       </table>
			      </td>
			     </tr>
			    </table>
			    <table th:if="${session.id!=null}">
			     <tr>
			      <td>
			       <textarea rows="4" cols="130" style="float: left;margin-left: 30px;" v-model="msg" ref="msg"></textarea>
			       <button type="button" class="btn-info" style="width: 105px;height: 86px;float: left;" @click="insert()">ê¸€ ì“°ê¸°</button>
			      </td>
			     </tr>
			    </table>
			    </td>
			   </tr>
			  </table>
			  </div>
		</div>
	</div>
	<script>
	 const commentApp=Vue.createApp({
		 	data(){
		 		return {
		 			list:[],
		 			cno:'[[${vo.goods_id}]]',
		 			sessionId:'[[${sessionId}]]',
		 			msg:'',
		 			type:'1',
		 			up:false
		 		}
		 	},
		 	mounted(){
		 		axios.get('http://localhost/comment/list_vue/',{
		 				params:{
		 					cno:this.cno,
		 					type:this.type
		 				}
		 			}).then(response=>{
		 				console.log(response.data)
		 				this.list=response.data.list
		 				this.cno=response.data.cno
		 				this.type=response.data.type
		 				})
		 		},
		 		methods:{
		 			insert(){
		 				if(this.msg==="")
		 				{
		 					this.$refs.msg.focus()
		 					return
		 				}
		 				axios.post('http://localhost/comment/insert_vue/',{
		 					cno:this.cno,
	 						type:this.type,
	 						msg:this.msg
		 					}).then(response=>{
		 						console.log(response.data)
		 						this.list=response.data.list
		 						this.cno=response.data.cno
		 						this.type=response.data.type
		 					})
		 					this.msg=""
		 					this.$refs.msg.focus()
		 			},
		 			replyDelete(no){
		 				axios.get('http://localhost/comment/delete_vue/',{
		 						params:{
		 							no:no,
		 							cno:this.cno,
		 							type:this.type
		 						}
		 					}).then(response=>{
		 						console.log(response.data)
		 						this.list=response.data.list
		 						this.cno=response.data.cno
		 						this.type=response.data.type
		 						$('#up'+no).hide()
		 						$('#u'+no).text("ìˆ˜ì •")
		 						})
		 			},
		 			replyUpdateForm(no){
		 				$('.ups').hide()
		 				$('.upbtn').text("ìˆ˜ì •")
		 				if(this.up===false)
		 				{
		 					this.up=true
		 					$('#up'+no).show()
		 					$('#u'+no).text("ì·¨ì†Œ")
		 				}
		 				else
		 				{
		 					this.up=false
		 					$('#up'+no).hide()
		 					$('#u'+no).text("ìˆ˜ì •")
		 				}
		 			},
		 			replyUpdate(no){
		 				let msg=$('#umsg'+no).val()
		 				if(msg==="")
		 				{
		 					$('#umsg'+no).focus()
		 					return
		 				}
		 				axios.get('http://localhost/comment/update_vue/',{
		 					params:{
		 						no:no,
		 						cno:this.cno,
		 						type:this.type,
		 						msg:msg
		 					}
		 				}).then(response=>{
		 					console.log(response.data)
		 					this.list=response.data.list
		 					this.cno=response.data.cno
		 					this.type=response.data.type
		 					$('#up'+no).hide()
		 					$('#u'+no).text("ìˆ˜ì •")
		 				})
		 			}
		 		},
		 		cmoputed:{
		 			
		 		},
		 		components:{
		 			
		 		}
		 })
		 commentApp.config.compilerOptions.delimiters=['((','))']
 		 commentApp.mount("#main-wrapper")
	</script>
</body>
</html>