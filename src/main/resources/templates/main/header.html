<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
	<!-- Header -->
	<section id="header" class="wrapper">
		<!-- Nav -->
		<nav id="nav">
			<ul class="header-font">
				<li class="current"><a href="/">Home</a></li>
				<li><a href="/">컨텐츠</a>
					<ul>
						<li><a href="/biz/list">비즈니스</a></li>
						<li><a href="/biz/b_type?b_type=생활라이프">생활라이프</a></li>
						<li><a href="/biz/b_type?b_type=운동건강">운동/건강</a></li>
						<li><a href="/biz/b_type?b_type=취미/자기개발">취미/자기개발</a>
						<li><a href="/biz/b_type?b_type=기타">기타</a></li>
					</ul></li>
					<li><a href="/">Shoes</a>
					<ul>
						<li><a href="/shoes/list">All</a></li>
						<li><a href="/shoes/brand?brand=Nike">Nike</a></li>
						<li><a href="/shoes/brand?brand=Asics">Asics</a></li>
						<li><a href="/shoes/brand?brand=Adidas">Adidas</a></li>
						<li><a href="/shoes/brand?brand=Mihara Yasuhiro">Mihara Yasuhiro</a></li>
					</ul></li>
				<li><a href="/board/list">커뮤니티</a></li>
				<li><a href="/music/Top200_list">Music Top 200</a>
				<li><a href="">장르별 차트</a>
				 <ul>
				  <li><a href="/music/list?cno=2">가요</a></li>
				  <li><a href="/music/list?cno=3">POP</a></li>
				  <li><a href="/music/list?cno=4">OST</a></li>
				  <li><a href="/music/list?cno=5">트롯</a></li>
				  <li><a href="/music/list?cno=6">Jazz</a></li>
				 </ul>
				</li>
				<div class="text-center login-box" th:if="${session.id==null}" >
					<span class="login-label">ID:</span><input type=text ref=id class="input-sm" size=15 v-model="id">
					&nbsp;<span class="login-label">PWD:</span><input type=password ref=pwd class="input-sm" size=15
						v-model="pwd"> &nbsp;
					<button class="btn-sm btn-primary" type="button" @click="login()">로그인</button>
				</div>
				 <div class="text-center" th:if="${session.id!=null}">
					<span style="color: white;">[[${session.name}]]님 로그인되었습니다</span>&nbsp;&nbsp;&nbsp;&nbsp;
					<button class="btn-sm btn-primary" type="button" @click="logout()">로그아웃</button>
				</div>
			</ul>
		</nav>

	</section>
<script>
	const logApp=Vue.createApp({
		data(){
			return {
				id:'',
				pwd:'',				
				vo:{}
			}
		},
		methods:{
			login(){
				if(this.id==="")
				{
					this.$refs.id.focus()
					return
				}
				if(this.pwd==="")
				{
					this.$refs.pwd.focus()
					return
				}
				axios.get('http://localhost/member/login_vue/',{
					params:{
						id:this.id,
						pwd:this.pwd
					}
				}).then(response=>{
					console.log(response.data)
					this.vo=response.data
					if(response.data.msg==='OK')
					{
						location.href="/"
					}
					else if(response.data.msg==='NOID')
					{
						alert("아이디가 존재하지 않습니다")
						this.id="";
						this.pwd="";
						this.$refs.id.focus()
					}
					else if(response.data.msg==='NOPWD')
					{
						alert("비밀번호가 틀립니다")
						this.pwd="";
						this.$refs.pwd.focus()
					}
				})
			},
			logout(){
				axios.get('http://localhost/member/logout_vue/')
				.then(response=>{
					if(response.data==='yes')
					{
						location.href="/"
					}
				})
			}
		}
	})
	logApp.config.compilerOptions.delimiters=['((','))']
	logApp.mount("#header")
</script>
</body>
</html>